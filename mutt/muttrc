# My Mailer
set sendmail = "/usr/bin/msmtp"

# Read private settings
source ~/.mutt/private

# Maildir
set mbox_type        = Maildir
set folder           = "/home/thomas/Mail/"
set spoolfile        = "+mailbox.org/INBOX"
set record           = "+mailbox.org/Sent"
set postponed        = "+mailbox.org/Drafts"
set header_cache     = ~/.mutt/cache/headers
set message_cachedir = ~/.mutt/cache/bodies

# Read mailboxes fetched by offlineimap
source ~/.mutt/mailboxes

# Read macros
source ~/.mutt/macros

# Mutt Behaviour
set move              = no
set sort              = 'threads'
set sort_aux          = 'reverse-last-date-received'
set sort_re           = yes
set pager_context     = 5
set pager_stop        = yes
set pager_index_lines = 6
set quit              = ask-yes
set fast_reply        = yes
set include           = yes
set reverse_name      = yes

# VIM-Like Movement in Index
bind index gg first-entry
bind index G  last-entry
bind index,pager F  flag-message
bind index,pager R  group-reply
bind attach <return> view-mailcap

# Headers
ignore "Authentication-Results:"
ignore "DomainKey-Signature:"
ignore "DKIM-Signature:"
ignore "X-Flags:"

# Nice spell checker
#set editor="vim -c 'set spell spelllang=de,en' +Goyo"dr_order "Date From To Cc"

# GPG
set crypt_use_gpgme   = yes
set crypt_replysign   = yes
set crypt_replysignencrypted = yes
set pgp_use_gpg_agent = yes
set pgp_timeout       = 3600
set pgp_autosign      = yes

# Using khard as address book
set query_command= "khard email --parsable %s"
bind editor <Tab> complete-query
bind editor ^T    complete

# If your address books contain hundreds or even thousands of contacts and the query process is very slow, you may try the --search-in-source-files option to speed up the search:
#set query_command= "khard email --parsable --search-in-source-files %s"

macro index,pager A \
    "<pipe-message>khard add-email<return>" \
    "add the sender email address to khard"

macro index,pager <F10> \
    "<copy-message>/tmp/mutttmpbox\n<enter><shell-escape>~/dotfiles/bin/viewhtmlmail\n" \
    "View HTML in browser"

set xterm_set_titles  = yes

auto_view text/html

# prefer plain text
alternative_order text/plain text/enriched text/html

# Colors
source ~/.mutt/colors
#color header     brightgreen   default  "^(from|subject):" # bold sender
#color body       cyan          default  "[-a-z_0-9.+]+@[-a-z_0-9.]+" # highlight mail addresses in body
#uncolor index *
#color index      white         default  ~Q # replied messages
#color index      green         default  ~F # marked messages
#color index      red           default  ~N # new messages
#color index      brightred     default  ~O # unread messages
#color index      magenta       default  ~T # tagged messages
#color index      yellow        default  ~D # deleted messages
